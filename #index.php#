<?php
include("Mahjong.php");
$mj = new Mahjong();
?>
<!DOCTYPE html>
<html>
  <head>
    <title data-trans="Mahjong Points Table">Mahjong poängtabell</title>
    <meta content = "width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name = "viewport" />
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="Mahjong.js"></script>
    <script src="translation-sv.js"></script>
    <script src="translation-en.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1 data-trans="Mahjong Points Table">Mahjong poängtabell</h1>
<?php if ($mj->is_logged_in()): ?>
    <button id="btn_logout"><span class="web"><span data-trans="Logout">Logga ut</span></span><span class="phone">LO</span></button>
<?php else: ?>
    <button id="btn_show_login"><span class="web"><span data-trans="Login">Logga in</span></span><span class="phone">LI</span></button>
<?php endif; ?>
        <button id="btn_show_options"><span class="web"><span data-trans="Settings">Inställningar</span>&hellip;</span><span class="phone">&hellip;</span></button>
      </div>
      <div class="headerspacer"></div>
      <div class="main">
<?php if (!$mj->is_logged_in()): ?>
    <div id="login" class="pop-up closed">
	  <div class="pu_bkgrnd"></div>
    <form id="frm_login" action="login.php" method="POST">
    <input type="text" name="login_name"><input type="password" name="login_password"><button id="btn_login" type="submit" data-trans="Login">Logga in</button><a id="btn_show_register" href="" data-trans="Register new user">Registrera ny användare</a>
    </form>
    </div>
    <div id="register" class="pop-up closed">
	  <div class="pu_bkgrnd"></div>
    <form id="frm_register" action="register.php" method="POST">
    <input type="text" name="register_name"><input type="password" name="register_password"><input type="password" name="register_conf_password"><button id="btn_register" type="submit" data-trans="Register">Skapa ny användare</button>
    </form>
    </div>
<?php endif; ?>
        <div id="options" class="pop-up closed">
	  <div class="pu_bkgrnd"></div>
          <div class="restarts">
            <button type="button" id="btn_restart" data-trans="Restart game">Starta om spel</button>
            <button type="button" id="btn_custom" data-trans="Start custom game">Starta pågående spel</button>
<?php if ($mj->is_logged_in()): ?>
    <button type="button" id="btn_saveload" data-trans="Save or load game">Spara eller ladda spel</button>
<?php endif; ?>
    </div>
	  <div id="custom" class="pop-up closed">
	    <div class="pu_bkgrnd"></div>
	    <div class="settings">
	      <form id="frm_custom" action="set_settings.php" method="POST">
		<div class="setting" id="custom_pl1">
		  <span class="opt_title" data-trans="Points player 1">Poäng spelare 1</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind_player" value="1" id="custom_wind_pl1" checked><label for="custom_wind_pl1"></label><input type="number" step="1" id="custom_start_pl1" value="2000">
		  </span>
		</div>
		<div class="setting" id="custom_pl2">
		  <span class="opt_title" data-trans="Points player 2">Poäng spelare 2</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind_player" value="2" id="custom_wind_pl2"><label for="custom_wind_pl2"></label><input type="number" step="1" id="custom_start_pl2" value="2000">
		  </span>
		</div>
		<div class="setting" id="custom_pl3">
		  <span class="opt_title" data-trans="Points player 3">Poäng spelare 3</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind_player" value="3" id="custom_wind_pl3"><label for="custom_wind_pl3"></label><input type="number" step="1" id="custom_start_pl3" value="2000">
		  </span>
		</div>
		<div class="setting" id="custom_pl4">
		  <span class="opt_title" data-trans="Points player 4">Poäng spelare 4</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind_player" value="4" id="custom_wind_pl4"><label for="custom_wind_pl4"></label><input type="number" step="1" id="custom_start_pl4" value="2000">
		  </span>
		</div>
		<div class="setting" id="custom_pl5">
		  <span class="opt_title" data-trans="Points player 5">Poäng spelare 5</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind_player" value="5" id="custom_wind_pl5"><label for="custom_wind_pl5"></label><input type="number" step="1" id="custom_start_pl5" value="2000">
		  </span>
		</div>
		<div class="setting">
		  <span class="opt_title" data-trans="Current wind">Aktuell rondens vind</span>
		  <span class="opt_options">
		    <input type="radio" name="custom_wind" value="0" id="custom_wind_0" checked><label for="custom_wind_0"></label><input type="radio" name="custom_wind" value="1" id="custom_wind_1"><label for="custom_wind_1"></label><input type="radio" name="custom_wind" value="2" id="custom_wind_2"><label for="custom_wind_2"></label><input type="radio" name="custom_wind" value="3" id="custom_wind_3"><label for="custom_wind_3"></label><input type="radio" name="custom_wind" value="4" id="custom_wind_4"><label for="custom_wind_4"></label>
		  </span>
		</div>
		<div class="confirm">
		  <button type="button" id="btn_cstm_cancel" data-trans="Cancel">Avbryt</button>
		  <button type="button" id="btn_cstm_start" data-trans="Start">Starta</button>
		</div>
	      </form>
	    </div>
	  </div>
	  <div id="saveload" class="pop-up closed">
	    <div class="pu_bkgrnd"></div>
	    <form id="frm_saveload">
    <select id="slct_sl" size="6"><?php echo $mj->get_save_games(); ?></select>
	      <div class="confirm">
		<button type="button" id="btn_sl_cancel" data-trans="Cancel">Avbryt</button>
		<button type="button" id="btn_sl_remove" disabled data-trans="Remove">Ta bort</button>
		<button type="button" id="btn_sl_load" disabled data-trans="Load">Ladda</button>
	      </div>
	    </form>
	  </div>
          <div class="settings">
	    <form id="frm_settings" action="set_settings.php" method="POST">
	      <div class="setting">
		<span class="opt_title" data-trans="Language">Språk</span>
		<span class="opt_options" id="languages"></span>
	      </div>
	      <div class="setting">
		<span class="opt_title" data-trans="Number of players">Antal spelare</span>
		<span class="opt_options">
		  <input type="radio" name="no_players" value="2" id="no_players_2"><label for="no_players_2" data-trans="Two">Två</label><input type="radio" name="no_players" value="3" id="no_players_3"><label for="no_players_3" data-trans="Three">Tre</label><input type="radio" name="no_players" value="4" id="no_players_4"><label for="no_players_4" data-trans="Four">Fyra</label><input type="radio" name="no_players" value="5" id="no_players_5"><label for="no_players_5" data-trans="Five">Fem</label>
		</span>
	      </div>
	      <div class="setting" id="fifth_player_pause_setting">
		<span class="opt_title" data-trans="Fifth player does not participate">Femte spelaren deltar inte</span>
		<span class="opt_options">
		  <input type="radio" name="fifth_player_pause" id="fifth_player_pause_yes" value="1"><label for="fifth_player_pause_yes" data-trans="Yes">Ja</label><input type="radio" name="fifth_player_pause" id="fifth_player_pause_no" value="0"><label for="fifth_player_pause_no" data-trans="No">Nej</label>
		</span>
	      </div>
	      <div class="setting">
		<span class="opt_title" data-trans="Points distribution">Poängutdelning</span>
		<span class="opt_options">
		  <input type="radio" name="points_distribution" value="0" id="points_distribution_0"><label for="points_distribution_0" data-trans="All gets points">Alla får poäng</label><br/>
		  <input type="radio" name="points_distribution" value="1" id="points_distribution_1"><label for="points_distribution_1" data-trans="Mahjong gets points">Mahjong får poäng</label><br/>
		  <input type="radio" name="points_distribution" value="2" id="points_distribution_2"><label for="points_distribution_2" data-trans="All pays all">Alla betalar till alla</label><br/>
                  <input type="radio" name="points_distribution" value="3" id="points_distribution_3"><label for="points_distribution_3" data-trans="All pays Mahjong">Alla betalar till Mahjong</label>
		</span>
	      </div>
	      <div class="setting">
		<span class="opt_title" data-trans="Start points">Startpoäng</span>
		<span class="opt_options">
		  <input type="number" step="1" id="start_points" value="2000">
		</span>
	      </div>
              <div class="confirm">
                <button type="button" id="btn_opt_cancel" data-trans="Cancel">Avbryt</button>
                <button type="submit" id="opt_ok" data-trans="OK">Ok</button>
              </div>
	    </form>
          </div>
        </div>














    B
        <form id="frm_game">
    <div id="table"><?php echo $mj->get_table(); ?></div>
          <div class="buttons">
            <button type="submit" data-trans="Submit">Lägg in</button>
            <button type="button" id="btn_undo" data-trans="Undo">Ångra</button>
          </div>
        </form>
      </div>
    </div>
    <div id="mj_alert" class="pop-up closed"><div class="pu_bkgrnd" id="mj_alert_bkgrnd"></div><div id="mj_alert_text"></div></div>
    <div id="mj_confirm" class="pop-up closed"><div class="pu_bkgrnd" id="mj_confirm_bkgrnd"></div>
      <div id="mj_confirm_question"></div>
      <div class="confirm">
	<button type="button" id="btn_mj_confirm_cancel" data-trans="Cancel">Avbryt</button>
	<button type="button" id="btn_mj_confirm_ok" data-trans="OK">Ok</button>
      </div>
    </div>
    <div id="mj_prompt" class="pop-up closed"><div class="pu_bkgrnd" id="mj_prompt_bkgrnd"></div>
      <form id="mj_prompt_form">
	<div id="mj_prompt_question"></div>
	<div class="mj_prompt_answer"><input type="text" id="mj_prompt_answer"></div>
	<div class="confirm">
	  <button type="button" id="btn_mj_prompt_cancel" data-trans="Cancel">Avbryt</button>
	  <button type="submit" id="btn_mj_prompt_ok" data-trans="OK">Ok</button>
	</div>
      </form>
    </div>
    <div id="info" class="pop-up closed"><div class="pu_bkgrnd" id="mj_prompt_bkgrnd"></div>
      <div class="infotext">
	<h2 data-trans="Settings">Inställningar</h2>
	<p data-trans=""></p>
      </div>
    </div>
    <div id="goodwork"></div>
  </body>
</html>
